# `remove:*`

## Описание

Хуки `remove:before` и `remove:after` срабатывают при удалении элемента из коллекции.

- `remove:before` вызывается **до** удаления элемента.
- `remove:after` вызывается **после** успешного удаления элемента.

Хуки позволяют перехватывать процесс удаления, проверять условия или выполнять побочные действия.

---

## Синтаксис хука

```ts
hook({
  item,
  index,
  meta,
}): boolean | void;
```

- **item** — элемент, который будет удалён.
- **index** — индекс элемента в коллекции.
- **meta** — мета-информация коллекции (например, ключ первичного поля).
- **Возвращаемое значение**:
  - Если `remove:before` возвращает `false`, операция удаления отменяется.
  - `remove:after` не влияет на ход операции.

---

## Поведение

- `remove:before` может заблокировать удаление, вернув `false`.
- `remove:after` вызывается всегда после успешного удаления.
- Если несколько хуков зарегистрированы, они вызываются в порядке регистрации.

---

## Примеры

### Блокировка удаления по условию

```ts
collection[$CollectionHookDispatcherSymbol].register(
  "remove:before",
  ({ item }) => {
    if (item.protected) {
      return false; // Нельзя удалить защищённые элементы
    }
  },
);
```

### Логирование успешного удаления

```ts
collection[$CollectionHookDispatcherSymbol].register(
  "remove:after",
  ({ item, index, meta }) => {
    console.log(
      `Элемент с ключом ${item[meta.primaryKey]} удалён с позиции ${index}`,
    );
  },
);
```
