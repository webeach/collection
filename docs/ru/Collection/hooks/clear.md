# `clear:before` и `clear:after`

## Описание

Хуки `clear:before` и `clear:after` срабатывают при очистке коллекции.

- `clear:before` вызывается **до** удаления всех элементов.
- `clear:after` вызывается **после** успешной очистки коллекции.

Хуки позволяют перехватывать процесс очистки и выполнять дополнительные действия.

---

## Синтаксис хука

```ts
hook({
  meta,
}): boolean | void;
```

- **meta** — мета-информация коллекции (например, ключ первичного поля).
- **Возвращаемое значение**:
  - Если `clear:before` возвращает `false`, операция очистки отменяется.
  - `clear:after` не влияет на ход операции.

---

## Поведение

- `clear:before` может заблокировать очистку коллекции, вернув `false`.
- `clear:after` вызывается всегда после успешной очистки.
- Хуки вызываются в порядке их регистрации.

---

## Примеры

### Блокировка очистки коллекции

```ts
collection[$CollectionHookDispatcherSymbol].register('clear:before', ({ meta }) => {
  console.log(`Попытка очистить коллекцию с первичным ключом ${meta.primaryKey}`);
  return false; // Запрещаем очистку
});
```

### Действие после успешной очистки

```ts
collection[$CollectionHookDispatcherSymbol].register('clear:after', ({ meta }) => {
  console.log(`Коллекция с первичным ключом ${meta.primaryKey} успешно очищена.`);
});
```
